(function(b){b.autocomplete=function(){var r,d,e,g=0,m="ac"+(new Date-0)+"_",h,n=null,o=null,p=false,s=false,t=false,u=function(a){var l=e.getElementsByTagName("li").length,f=h.getAttribute("id"),c=parseInt,d=[];f.indexOf("_")>-1&&(d=f.split("_"));f=c(d.length==2?d[1]:"");c=m+(f+a+l)%l;h.className="";b(c).className="hover";h=b(c);q((f+a+l)%l)},q=function(a){window.setTimeout(function(){e.scrollTop=a>8?(a-8)*20:0},0)},k=function(){if(h){var a=h.getAttribute("_value");g==1?d.innerHTML=b.html.encode(a):
d.value=a;typeof n=="function"&&n()}},v=function(){var a=function(a){b.css.hasClass(e,"hide")?b.css.removeClass(e,"hide"):b.css.addClass(e,"hide");s&&d.value&&d.select();a.stopPropagation()};b.e.add(d,"keydown",function(a){g==1&&a.preventDefault();a.stopPropagation();switch(a.keyCode){case 38:u(-1);break;case 40:u(1);break;case 13:k();i();a.preventDefault();a.stopPropagation();break;case 9:k(),i(),t&&a.preventDefault()}});b.e.add(d,"keyup",function(a){var b=a.keyCode;b!=38&&b!=40&&b!=13&&b!=9&&b!=
116?typeof o=="function"&&o(this.value):b==13&&a.preventDefault()});b.e.add(d,"blur",function(){g==2&&k()});b.e.add(e,"mousemove",function(a){var b=a.target;if(b.tagName.toLowerCase()=="li"){if(h)h.className="";b.className="hover";h=b;a.stopPropagation()}});b.e.add(e,"click",function(a){a.stopPropagation();a=a.target;a.tagName.toLowerCase()=="li"&&(h=a,k(),i())});b.e.add(document,"click",function(){i()});g!=0&&b.e.add(d,"click",a)},i=function(){b.css.addClass(e,"hide")};return{init:function(a){r=
a.domAppendTo;d=a.domInput;g=a.comboxModel?a.comboxModel:0;n=a.changeCallback;o=a.keyupCallback;p=a.needLine;s=a.inputSelect;t=a.preventTabDefault;e=document.createElement("ul");e.className="combox-list hide";r.appendChild(e);v()},initList:function(a,d){var f=a.length,c=[],i=0;if(f!=0){for(var j=0;j<f;j++){var g=m+j;p&&/00886$/.test(a[j].value)?c.push('<li style="border-bottom:1px solid #ccc;" id='+g+' _value="'+b.html.encode(a[j].value+"")+'" >'+b.html.encode(a[j].name+"")+"</li>"):c.push("<li id="+
g+' _value="'+b.html.encode(a[j].value+"")+'" >'+b.html.encode(a[j].name+"")+"</li>");d&&RegExp(d+"$").test(a[j].value)&&(i=j)}e.innerHTML=c.join(" ");h=e.getElementsByTagName("li")[i];h.className="hover";q(i)}},setDefaultValue:function(a){g==1?d.innerHTML=b.html.encode(a.name):d.value=a.name},getSelectValue:function(){return""},show:function(a){b.css.removeClass(e,"hide");var g=a.length,f=[];if(g==0)i();else{for(var c=0;c<g;c++){var k=m+c;d.value==a[c].value&&i();0==c?f.push('<li  class="hover" id='+
k+' _value="'+b.html.encode(a[c].value+"")+'" >'+b.html.encode(a[c].name+"")+"</li>"):p&&/00886$/.test(a[c].value)&&!d.value?f.push('<li style="border-bottom:1px solid #ccc;" id='+k+' _value="'+b.html.encode(a[c].value+"")+'" >'+b.html.encode(a[c].name+"")+"</li>"):f.push("<li id="+k+' _value="'+b.html.encode(a[c].value+"")+'" >'+b.html.encode(a[c].name+"")+"</li>")}e.innerHTML=f.join(" ");h=e.getElementsByTagName("li")[0];q(0)}},hide:i}}})($);
